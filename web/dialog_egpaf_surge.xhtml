<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition>

        <p:dialog id="detailreportdialog" header="#{dashboard_surgeBean.getIndicatorStringById(dashboard_surgeBean.indicator_id)}" widgetVar="detailReport" modal="true" resizable="false" >
            <h:form id="detailForm">
                <p:panel style="border-style: solid;">
                    <p:dataTable id="table_dialog" widgetVar="reportList" value="#{dashboard_surgeBean.dashboard_surgeList}" var="item" rows="20"
                                 paginator="true"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
                                 rowsPerPageTemplate="20,40,100,500" 
                                 emptyMessage="No record found with given criteria">
                        <f:facet name="{Exporters}">
                            <h:commandLink>
                                <p:graphicImage name="images/pdf.png" width="24"/>
                                <p:dataExporter type="pdf" target="table_dialog" fileName="EGPAF_Surge_List"/>
                            </h:commandLink>

                            <h:commandLink>
                                <p:graphicImage name="images/csv.png" width="24"/>
                                <p:dataExporter type="csv" target="table_dialog" fileName="EGPAF_Surge_List" />
                            </h:commandLink>

                            <h:commandLink>
                                <p:graphicImage name="images/xml.png" width="24"/>
                                <p:dataExporter type="xml" target="table_dialog" fileName="EGPAF_Surge_List" />
                            </h:commandLink>
                        </f:facet>
                        <p:column headerText="District">
                            <h:outputText value="#{dashboard_surgeBean.getHfById(item.district_id).district.district_name}"/>
                        </p:column>
                        <p:column headerText="Health Facility">
                            <h:outputText value="#{dashboard_surgeBean.getHfById(item.health_facility_id).health_facility_name}"/>
                        </p:column>
                        <p:column headerText="Year">
                            <h:outputText value="#{item.report_period_year}"/>
                        </p:column>
                        <p:column headerText="Week">
                            <h:outputText value="#{item.report_period_week}"/>
                        </p:column>
                        <p:column headerText="Indicator %">
                            <h:outputText value="#{item.perc_test_coverage}" rendered="#{dashboard_surgeBean.indicator_id==1}"/>
                            <h:outputText value="#{item.perc_miss_appoint_cur}" rendered="#{dashboard_surgeBean.indicator_id==2}"/>
                            <h:outputText value="#{item.perc_miss_appoint_prev}" rendered="#{dashboard_surgeBean.indicator_id==3}"/>
                            <h:outputText value="#{item.perc_hts_yield}" rendered="#{dashboard_surgeBean.indicator_id==4}"/>
                            <h:outputText value="#{item.perc_start_art}" rendered="#{dashboard_surgeBean.indicator_id==5}"/>
                        </p:column>
                        <p:column headerText="a">
                            <h:outputText value="#{item.a}"/>
                        </p:column>
                        <p:column headerText="b">
                            <h:outputText value="#{item.b}"/>
                        </p:column>
                        <p:column headerText="bp">
                            <h:outputText value="#{item.b_prev}"/>
                        </p:column>
                        <p:column headerText="c">
                            <h:outputText value="#{item.c}"/>
                        </p:column>
                        <p:column headerText="d">
                            <h:outputText value="#{item.d}"/>
                        </p:column>
                        <p:column headerText="e">
                            <h:outputText value="#{item.e}"/>
                        </p:column>
                        <p:column headerText="f">
                            <h:outputText value="#{item.f}"/>
                        </p:column>
                        <p:column headerText="g">
                            <h:outputText value="#{item.g}"/>
                        </p:column>
                        <p:column headerText="h">
                            <h:outputText value="#{item.h}"/>
                        </p:column>
                        <p:column headerText="i">
                            <h:outputText value="#{item.i}"/>
                        </p:column>
                        <p:column headerText="j">
                            <h:outputText value="#{item.j}"/>
                        </p:column>
                        <p:column headerText="k">
                            <h:outputText value="#{item.k}"/>
                        </p:column>
                        <p:column headerText="l">
                            <h:outputText value="#{item.l}"/>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </h:form>
        </p:dialog>
    </ui:composition>
</html>
